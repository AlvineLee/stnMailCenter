<?= $this->extend('layouts/header') ?>

<?= $this->section('content') ?>
<div class="list-page-container">
    <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
    <div class="mb-4 flex gap-2">
        <a href="<?= base_url('department') ?>" class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            ‚Üê Î™©Î°ùÏúºÎ°ú
        </a>
        <button onclick="expandAll()" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
            Ï†ÑÏ≤¥ ÌéºÏπòÍ∏∞
        </button>
        <button onclick="collapseAll()" class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-600 border border-transparent rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
            Ï†ÑÏ≤¥ Ï†ëÍ∏∞
        </button>
    </div>

    <!-- Î∂ÄÏÑú Í≥ÑÏ∏µ Íµ¨Ï°∞ -->
    <div class="tree-container">
        <div id="hierarchyTree">
            <!-- STN ÎÑ§Ìä∏ÏõåÌÅ¨ -->
            <div class="tree-node" data-level="0">
                <div class="tree-node-content" onclick="toggleTreeNode(this)">
                    <div class="tree-toggle">+</div>
                    <div class="tree-icon level-0">üè¢</div>
                    <div class="tree-label level-0">STN ÎÑ§Ìä∏ÏõåÌÅ¨</div>
                    <div class="tree-code">Î≥∏Ï†ê</div>
                </div>
                <div class="tree-children">
                    <!-- Í∞úÎ∞úÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content" onclick="toggleTreeNode(this)">
                            <div class="tree-toggle">+</div>
                            <div class="tree-icon level-1">üíª</div>
                            <div class="tree-label level-1">Í∞úÎ∞úÌåÄ</div>
                            <div class="tree-code">DEPT001</div>
                        </div>
                        <div class="tree-children">
                            <!-- ÌîÑÎ°†Ìä∏ÏóîÎìúÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üé®</div>
                                    <div class="tree-label level-2">ÌîÑÎ°†Ìä∏ÏóîÎìúÌåÄ</div>
                                    <div class="tree-code">DEPT001-1</div>
                                </div>
                            </div>
                            <!-- Î∞±ÏóîÎìúÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">‚öôÔ∏è</div>
                                    <div class="tree-label level-2">Î∞±ÏóîÎìúÌåÄ</div>
                                    <div class="tree-code">DEPT001-2</div>
                                </div>
                            </div>
                            <!-- QAÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üîç</div>
                                    <div class="tree-label level-2">QAÌåÄ</div>
                                    <div class="tree-code">DEPT001-3</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ÎßàÏºÄÌåÖÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content" onclick="toggleTreeNode(this)">
                            <div class="tree-toggle">+</div>
                            <div class="tree-icon level-1">üì¢</div>
                            <div class="tree-label level-1">ÎßàÏºÄÌåÖÌåÄ</div>
                            <div class="tree-code">DEPT002</div>
                        </div>
                        <div class="tree-children">
                            <!-- ÎîîÏßÄÌÑ∏ÎßàÏºÄÌåÖÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üì±</div>
                                    <div class="tree-label level-2">ÎîîÏßÄÌÑ∏ÎßàÏºÄÌåÖÌåÄ</div>
                                    <div class="tree-code">DEPT002-1</div>
                                </div>
                            </div>
                            <!-- Î∏åÎûúÎìúÎßàÏºÄÌåÖÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üéØ</div>
                                    <div class="tree-label level-2">Î∏åÎûúÎìúÎßàÏºÄÌåÖÌåÄ</div>
                                    <div class="tree-code">DEPT002-2</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ÏòÅÏóÖÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content" onclick="toggleTreeNode(this)">
                            <div class="tree-toggle">+</div>
                            <div class="tree-icon level-1">üíº</div>
                            <div class="tree-label level-1">ÏòÅÏóÖÌåÄ</div>
                            <div class="tree-code">DEPT003</div>
                        </div>
                        <div class="tree-children">
                            <!-- Íµ≠ÎÇ¥ÏòÅÏóÖÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üè†</div>
                                    <div class="tree-label level-2">Íµ≠ÎÇ¥ÏòÅÏóÖÌåÄ</div>
                                    <div class="tree-code">DEPT003-1</div>
                                </div>
                            </div>
                            <!-- Ìï¥Ïô∏ÏòÅÏóÖÌåÄ -->
                            <div class="tree-node" data-level="2">
                                <div class="tree-node-content">
                                    <div class="tree-toggle">‚Ä¢</div>
                                    <div class="tree-icon level-2">üåç</div>
                                    <div class="tree-label level-2">Ìï¥Ïô∏ÏòÅÏóÖÌåÄ</div>
                                    <div class="tree-code">DEPT003-2</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Ïù∏ÏÇ¨ÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content">
                            <div class="tree-toggle">‚Ä¢</div>
                            <div class="tree-icon level-1">üë•</div>
                            <div class="tree-label level-1">Ïù∏ÏÇ¨ÌåÄ</div>
                            <div class="tree-code">DEPT004</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- STN ÏÑúÏö∏ÏßÄÏÇ¨ -->
            <div class="tree-node" data-level="0">
                <div class="tree-node-content" onclick="toggleTreeNode(this)">
                    <div class="tree-toggle">+</div>
                    <div class="tree-icon level-0">üè™</div>
                    <div class="tree-label level-0">STN ÏÑúÏö∏ÏßÄÏÇ¨</div>
                    <div class="tree-code">ÏßÄÏÇ¨</div>
                </div>
                <div class="tree-children">
                    <!-- ÏÑúÏö∏ ÏòÅÏóÖÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content">
                            <div class="tree-toggle">‚Ä¢</div>
                            <div class="tree-icon level-1">üè¢</div>
                            <div class="tree-label level-1">ÏÑúÏö∏ ÏòÅÏóÖÌåÄ</div>
                            <div class="tree-code">DEPT005</div>
                        </div>
                    </div>
                    <!-- ÏÑúÏö∏ ÎßàÏºÄÌåÖÌåÄ -->
                    <div class="tree-node" data-level="1">
                        <div class="tree-node-content">
                            <div class="tree-toggle">‚Ä¢</div>
                            <div class="tree-icon level-1">üìà</div>
                            <div class="tree-label level-1">ÏÑúÏö∏ ÎßàÏºÄÌåÖÌåÄ</div>
                            <div class="tree-code">DEPT006</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- STN Í∞ïÎÇ®ÎåÄÎ¶¨Ï†ê -->
            <div class="tree-node" data-level="0">
                <div class="tree-node-content">
                    <div class="tree-toggle">‚Ä¢</div>
                    <div class="tree-icon level-0">üè¨</div>
                    <div class="tree-label level-0">STN Í∞ïÎÇ®ÎåÄÎ¶¨Ï†ê</div>
                    <div class="tree-code">ÎåÄÎ¶¨Ï†ê</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function toggleTreeNode(element) {
    const children = element.nextElementSibling;
    const toggleIcon = element.querySelector('.tree-toggle');
    
    if (children && toggleIcon) {
        if (children.style.display === 'none' || children.style.display === '') {
            children.style.display = 'block';
            toggleIcon.textContent = '-';
            element.classList.add('expanded');
        } else {
            children.style.display = 'none';
            toggleIcon.textContent = '+';
            element.classList.remove('expanded');
        }
    }
}

function expandAll() {
    document.querySelectorAll('.tree-children').forEach(child => {
        child.style.display = 'block';
    });
    document.querySelectorAll('.tree-toggle').forEach(icon => {
        if (icon.textContent === '+') {
            icon.textContent = '-';
        }
    });
    document.querySelectorAll('.tree-node-content').forEach(node => {
        node.classList.add('expanded');
    });
}

function collapseAll() {
    document.querySelectorAll('.tree-children').forEach(child => {
        child.style.display = 'none';
    });
    document.querySelectorAll('.tree-toggle').forEach(icon => {
        if (icon.textContent === '-') {
            icon.textContent = '+';
        }
    });
    document.querySelectorAll('.tree-node-content').forEach(node => {
        node.classList.remove('expanded');
    });
}

// ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî (Î™®Îì† ÎÖ∏ÎìúÎ•º Ï†ëÌûå ÏÉÅÌÉúÎ°ú ÏãúÏûë)
document.addEventListener('DOMContentLoaded', function() {
    collapseAll();
});
</script>
<?= $this->endSection() ?>
